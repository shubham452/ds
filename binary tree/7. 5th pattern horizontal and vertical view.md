Great â€” **Pattern 5 is small in size but very high-yield**, and once you get the *intuition*, all problems in this pattern feel the same.

Iâ€™ll explain it in a **teacher-style flow**, not code-dump style.

---

# ğŸŸ¦ PATTERN 5 â€” HORIZONTAL / VERTICAL VIEW

*(Position-based BFS)*

---

## ğŸ§  WHAT THIS PATTERN REALLY IS

Pattern 5 is **NOT about depth or paths**.

It is about **POSITION of a node relative to the root**.

ğŸ‘‰ Instead of asking
â€œHow deep is this node?â€

you ask
**â€œWhere is this node horizontally?â€**

---

## ğŸ§  CORE IDEA (ONE LINE)

> **Each node has a horizontal distance (HD) from the root.**

This single idea unlocks:

* Top View
* Bottom View
* Vertical Order
* Vertical Sum

---

## ğŸ§  WHAT IS HORIZONTAL DISTANCE (HD)?

Assign positions like this:

```
root â†’ HD = 0
left child â†’ HD = parent - 1
right child â†’ HD = parent + 1
```

Example:

```
        1(0)
       /   \
   2(-1)   3(+1)
     \
     4(0)
```

ğŸ“Œ Nodes with the **same HD are vertically aligned**.

---

## ğŸ§  HOW TO IDENTIFY PATTERN 5 (VERY IMPORTANT)

Before coding, ask:

### â“ Does the problem mention:

* top view
* bottom view
* vertical order
* vertical sum
* leftmost to rightmost

ğŸ‘‰ If YES â†’ **Pattern 5**

---

## ğŸ§  WHY BFS IS USED (IMPORTANT)

You might ask:

> â€œWhy not DFS?â€

Because:

* Views care about **which node appears first**
* BFS processes nodes **level by level**
* This naturally handles â€œtopmostâ€ vs â€œbottommostâ€

ğŸ“Œ **BFS preserves visual order**

---

# ğŸ”¹ SUB-PATTERNS OF PATTERN 5

Pattern 5 has **4 very clear sub-patterns**.
All use the **same template** â€” only the rule changes.

---

## ğŸ”¹ PATTERN 5A â€” TOP VIEW

### ğŸ§  Meaning

> â€œWhat do I see when I look from the top?â€

### Rule

* For each HD â†’ **take the FIRST node encountered**

### Why?

Because BFS hits higher (top) nodes first.

---

### ğŸ§± Logic Rule

```text
If HD not seen before â†’ store it
Ignore later nodes with same HD
```

---

### ğŸŸ¡ Golden Rule

> **Top view = first node per HD**

---

## ğŸ”¹ PATTERN 5B â€” BOTTOM VIEW

### ğŸ§  Meaning

> â€œWhat do I see when I look from the bottom?â€

### Rule

* For each HD â†’ **take the LAST node encountered**

### Why?

Lower nodes overwrite upper ones.

---

### ğŸ§± Logic Rule

```text
Always overwrite value at HD
```

---

### ğŸŸ¡ Golden Rule

> **Bottom view = last node per HD**

---

## ğŸ”¹ PATTERN 5C â€” VERTICAL ORDER TRAVERSAL

### ğŸ§  Meaning

> â€œGroup nodes by vertical columnsâ€

### Rule

* For each HD â†’ **store ALL nodes in order**

---

### ğŸ§± Logic Rule

```text
map[HD].push_back(node)
```

---

### ğŸŸ¡ Golden Rule

> **Vertical order = list per HD**

---

## ğŸ”¹ PATTERN 5D â€” VERTICAL SUM

### ğŸ§  Meaning

> â€œSum all nodes in the same vertical columnâ€

### Rule

* For each HD â†’ add values

---

### ğŸ§± Logic Rule

```text
map[HD] += node->data
```

---

### ğŸŸ¡ Golden Rule

> **Vertical sum = accumulate per HD**

---

# ğŸ§± UNIVERSAL TEMPLATE (VERY IMPORTANT)

This template **never changes** in Pattern 5.

```cpp
queue<pair<Node*, int>> q;   // node + HD
map<int, something> mp;

q.push({root, 0});

while (!q.empty()) {
    auto [node, hd] = q.front();
    q.pop();

    // pattern-specific logic here

    if (node->left)
        q.push({node->left, hd - 1});
    if (node->right)
        q.push({node->right, hd + 1});
}
```

ğŸ“Œ Only the **map update logic** changes.

---

## ğŸ§  HOW TO SOLVE ANY PATTERN-5 PROBLEM (STEP-BY-STEP)

Use this **exact checklist**:

### Step 1

Assign HD rules:

* root â†’ 0
* left â†’ -1
* right â†’ +1

---

### Step 2

Use BFS with:

```
queue<Node, HD>
```

---

### Step 3

Decide map behavior:

* First entry â†’ Top View
* Overwrite â†’ Bottom View
* Push list â†’ Vertical Order
* Add sum â†’ Vertical Sum

---

### Step 4

Traverse map from **smallest HD to largest HD**

---

## ğŸ§­ INTERVIEW IDENTIFICATION FLOW (FAST)

Ask:

1. Is this about **view or vertical alignment**?
2. Does **position** matter more than depth?
3. Am I grouping nodes by column?

If yes â†’ **Pattern 5**

---

## âŒ COMMON MISTAKES (AVOID THESE)

âŒ Using DFS instead of BFS
âŒ Forgetting HD update
âŒ Not sorting HD keys
âŒ Confusing top vs bottom overwrite rule

---

## ğŸ”’ FINAL MEMORY LOCK ğŸ”

Repeat this:

> **Pattern 4 = distance**
> **Pattern 5 = position**

And:

> **Position problems â†’ HD + BFS**

If this clicks, Pattern 5 becomes trivial.

---

## ğŸ WHAT TO PRACTICE NEXT (RECOMMENDED)

Solve in this exact order:

1. Vertical Order Traversal
2. Top View
3. Bottom View
4. Vertical Sum

If you want, next I can:

* Dry-run **Top View step by step**
* Compare **Pattern 4 vs Pattern 5**
* Give you a **1-page Patterns 4 + 5 cheat sheet**

Just tell me ğŸ‘
